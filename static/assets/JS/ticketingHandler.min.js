function recaptchaCallback(){$("#requestTicketButt").removeClass("disabled")}function displayTicketRequester(){getRemainingTickets(function(t){t>0?$("#googleAntiRobot").slideDown("slow"):displayError("Ticket Wave Sold Out! We will be releasing more soon. Hang tight. ")})}function getRemainingTickets(t){$.ajax({url:apiURL+"/tickets/ticketsavailable",type:"GET",cache:!1,success:function(e){t(e.availableTickets)}})}function provisionATicket(t){$.ajax({url:apiURL+"/tickets/provision",type:"POST",data:{googleToken:t},cache:!1,success:function(t){var e="https://my.mlh.io/oauth/authorize?client_id=791ddd35fc96cb579b5fd8ee9262960943299cbf3fd20da02d40afa7a4f51ba7&response_type=token";e=e+"&redirect_uri="+encodeURIComponent(callbackURL+"?ticketID="+t.ticket.id),$("#googleAntiRobot").slideUp(),addAuthWithMyMLHButt(e)}})}function addAuthWithMyMLHButt(t){$("#authMYMLHButton").html('<div id="registrationButton" class="text-cen1ter"><a href="'+t+'"><button type="button" class="btn btn-secondary btn-lg">Register With MYMLH</button></a></div>'),$("#authMYMLHButton").slideDown("slow")}function callBackendAssign(t,e){var i="mlh_access_token="+t+"&ticketID="+e;$.ajax({url:apiURL+"/tickets/assign",type:"POST",data:i,cache:!1,success:function(t){displayTicketDetails(t.name,t.email,t.ticketID)},error:function(t){console.log(t),t.responseJSON.error.msg&&displayError(t.responseJSON.error.msg)}})}function displayError(t){$("#errorMessageText").html(t),$("#errorMessage").slideDown("slow")}function displayTicketDetails(t,e,i){$("#ticketName").text(t),$("#ticketEmail").text(e),$("#ticketID").text(i),$("#ticket").slideDown("slow")}function gup(t,e){e||(e=location.href);var i="[\\#&]"+(t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"))+"=([^&#]*)",a=new RegExp(i).exec(e);return null==a?null:a[1]}var callbackURL="https://astonhack.co.uk/ticketing/",apiURL="https://ticketing.astonhack.co.uk",url_string=window.location.href,url=new URL(url_string),inAssignTicketStage=!0,inProvisionTicketMode=!1,queryParams={};queryParams.token_type=gup("token_type",url_string),queryParams.access_token=gup("access_token",url_string),queryParams.ticketID=url.searchParams.get("ticketID");for(var param in queryParams)void 0!==queryParams[param]&&null!==queryParams[param]||(inAssignTicketStage=!1);inAssignTicketStage?callBackendAssign(queryParams.access_token,queryParams.ticketID):displayTicketRequester(),$("#requestTicketButt").click(function(){provisionATicket($("#g-recaptcha-response").val())});